<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.woniuxy.smart_community.dao.HouseDao">

    <!--新增房间数据-->
<!--    <insert id="insertHouse">-->
<!--        insert into house(id, building_id, unit_id, floor_id, house_num, house_people_nums, house_state)-->
<!--        values (#{house.id}, #{house.building}, #{house.unit}, #{house.floor}, #{house.houseNum}, #{house.housePeopleNums}, #{house.houseState})-->
<!--    </insert>-->
    <insert id="insertHouse">
        insert into house( floor_id, house_num, house_people_nums, house_state)
        values ( #{house.floorId}, #{house.houseNum}, #{house.housePeopleNums}, #{house.houseState})
    </insert>

    <!--通过主键删除房间信息数据-->
    <delete id="deleteHouse" >
        delete from house where id = #{house.id}
    </delete>

    <!--通过主键修改房间信息数据-->
    <update id="updateHouse">
        update house
            <set>
                <if test="house.floorId != null and house.floorId != ''">
                    floor_id = #{house.floorId},
                </if>
                <if test="house.houseNum != null and #{house.houseNum} != ''">
                    house_num = #{house.houseNum},
                </if>
                <if test="house.housePeopleNums != null and house.housePeopleNums != ''">
                    house_people_nums = #{house.housePeopleNums},
                </if>
                <if test="house.houseState != null and house.houseState != ''">
                    house_state = #{house.houseState}
                </if>
                <if test="house.remark != null and house.remark != ''">
                    house_remark = #{house.remark}
                </if>
            </set>
        where id = #{house.id}
    </update>

    <!--通过房间信息查询相关数据-->
    <select id="selectHouse" resultType="house">
        select * from house
            <where>
                <if test="house.id != null">
                    and id = #{house.id}
                </if>
                <if test="house.floorId != null">
                    and floor_id = #{house.floorId}
                </if>
                <if test="house.houseNum != null and house.houseNum != ''">
                    and house_num = #{house.houseNum}
                </if>
                <if test="house.housePeopleNums != null">
                    and house_people_nums = #{house.housePeopleNums}
                </if>
                <if test="house.houseState != null">
                    and house_state = #{house.houseState}
                </if>
                <if test="house.remark != null and house.remark != ''">
                    and house_remark = % #{house.remark} %
                </if>
            </where>
    </select>
</mapper>

